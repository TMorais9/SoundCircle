import { __commonJS } from "./chunk-Ye9CTm_R.js";
import { require_react } from "./react-BqPUdaMv.js";
import { require_error } from "./error-D8RzeUUL.js";
import { require_AuthContext, require_action } from "./action-DTt8ds3g.js";
import { require_hooks } from "./hooks-DDWShskn.js";
import { require_jsx_runtime } from "./jsx-runtime-YSFgrA53.js";

//#region node_modules/react-auth-kit/dist/refresh/createRefresh.js
var require_createRefresh = /* @__PURE__ */ __commonJS({ "node_modules/react-auth-kit/dist/refresh/createRefresh.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	var _error = require_error();
	function createRefresh(param) {
		if (param.interval < 0) throw new _error.AuthKitConfigError("Refresh interval is a time in seconds and can't be a negative(-ve) number. Make sure you are using positive number.");
		return param;
	}
	exports.default = createRefresh;
}) });

//#endregion
//#region node_modules/react-auth-kit/dist/refresh/useRefreshApiCall.js
var require_useRefreshApiCall = /* @__PURE__ */ __commonJS({ "node_modules/react-auth-kit/dist/refresh/useRefreshApiCall.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.useRefreshApiCall = useRefreshApiCall;
	function _regenerator() {
		var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag";
		function i(r$1, n$1, o$1, i$1) {
			var c$1 = n$1 && n$1.prototype instanceof Generator ? n$1 : Generator, u$1 = Object.create(c$1.prototype);
			return _regeneratorDefine2(u$1, "_invoke", function(r$2, n$2, o$2) {
				var i$2, c$2, u$2, f$1 = 0, p = o$2 || [], y = !1, G = {
					p: 0,
					n: 0,
					v: e,
					a: d,
					f: d.bind(e, 4),
					d: function d$1(t$1, r$3) {
						return i$2 = t$1, c$2 = 0, u$2 = e, G.n = r$3, a;
					}
				};
				function d(r$3, n$3) {
					for (c$2 = r$3, u$2 = n$3, t = 0; !y && f$1 && !o$3 && t < p.length; t++) {
						var o$3, i$3 = p[t], d$1 = G.p, l = i$3[2];
						r$3 > 3 ? (o$3 = l === n$3) && (u$2 = i$3[(c$2 = i$3[4]) ? 5 : (c$2 = 3, 3)], i$3[4] = i$3[5] = e) : i$3[0] <= d$1 && ((o$3 = r$3 < 2 && d$1 < i$3[1]) ? (c$2 = 0, G.v = n$3, G.n = i$3[1]) : d$1 < l && (o$3 = r$3 < 3 || i$3[0] > n$3 || n$3 > l) && (i$3[4] = r$3, i$3[5] = n$3, G.n = l, c$2 = 0));
					}
					if (o$3 || r$3 > 1) return a;
					throw y = !0, n$3;
				}
				return function(o$3, p$1, l) {
					if (f$1 > 1) throw TypeError("Generator is already running");
					for (y && 1 === p$1 && d(p$1, l), c$2 = p$1, u$2 = l; (t = c$2 < 2 ? e : u$2) || !y;) {
						i$2 || (c$2 ? c$2 < 3 ? (c$2 > 1 && (G.n = -1), d(c$2, u$2)) : G.n = u$2 : G.v = u$2);
						try {
							if (f$1 = 2, i$2) {
								if (c$2 || (o$3 = "next"), t = i$2[o$3]) {
									if (!(t = t.call(i$2, u$2))) throw TypeError("iterator result is not an object");
									if (!t.done) return t;
									u$2 = t.value, c$2 < 2 && (c$2 = 0);
								} else 1 === c$2 && (t = i$2.return) && t.call(i$2), c$2 < 2 && (u$2 = TypeError("The iterator does not provide a '" + o$3 + "' method"), c$2 = 1);
								i$2 = e;
							} else if ((t = (y = G.n < 0) ? u$2 : r$2.call(n$2, G)) !== a) break;
						} catch (t$1) {
							i$2 = e, c$2 = 1, u$2 = t$1;
						} finally {
							f$1 = 1;
						}
					}
					return {
						value: t,
						done: y
					};
				};
			}(r$1, o$1, i$1), !0), u$1;
		}
		var a = {};
		function Generator() {}
		function GeneratorFunction() {}
		function GeneratorFunctionPrototype() {}
		t = Object.getPrototypeOf;
		var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function() {
			return this;
		}), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c);
		function f(e$1) {
			return Object.setPrototypeOf ? Object.setPrototypeOf(e$1, GeneratorFunctionPrototype) : (e$1.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e$1, o, "GeneratorFunction")), e$1.prototype = Object.create(u), e$1;
		}
		return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function() {
			return this;
		}), _regeneratorDefine2(u, "toString", function() {
			return "[object Generator]";
		}), (_regenerator = function _regenerator$1() {
			return {
				w: i,
				m: f
			};
		})();
	}
	function _regeneratorDefine2(e, r, n, t) {
		var i = Object.defineProperty;
		try {
			i({}, "", {});
		} catch (e$1) {
			i = 0;
		}
		_regeneratorDefine2 = function _regeneratorDefine(e$1, r$1, n$1, t$1) {
			function o(r$2, n$2) {
				_regeneratorDefine2(e$1, r$2, function(e$2) {
					return this._invoke(r$2, n$2, e$2);
				});
			}
			r$1 ? i ? i(e$1, r$1, {
				value: n$1,
				enumerable: !t$1,
				configurable: !t$1,
				writable: !t$1
			}) : e$1[r$1] = n$1 : (o("next", 0), o("throw", 1), o("return", 2));
		}, _regeneratorDefine2(e, r, n, t);
	}
	function asyncGeneratorStep(n, t, e, r, o, a, c) {
		try {
			var i = n[a](c), u = i.value;
		} catch (n$1) {
			e(n$1);
			return;
		}
		i.done ? t(u) : Promise.resolve(u).then(r, o);
	}
	function _asyncToGenerator(n) {
		return function() {
			var t = this, e = arguments;
			return new Promise(function(r, o) {
				var a = n.apply(t, e);
				function _next(n$1) {
					asyncGeneratorStep(a, r, o, _next, _throw, "next", n$1);
				}
				function _throw(n$1) {
					asyncGeneratorStep(a, r, o, _next, _throw, "throw", n$1);
				}
				_next(void 0);
			});
		};
	}
	function useRefreshApiCall(refresh, store) {
		return _asyncToGenerator(_regenerator().m(function _callee() {
			var _store$value$refresh;
			return _regenerator().w(function(_context) {
				while (1) switch (_context.n) {
					case 0: return _context.a(2, refresh.refreshApiCallback({ refreshToken: (_store$value$refresh = store.value.refresh) === null || _store$value$refresh === void 0 ? void 0 : _store$value$refresh.token }).then(function(result) {
						if (result.isSuccess) return new Promise(function(resolve) {
							resolve(result);
						});
						else return new Promise(function(resolve) {
							resolve(null);
						});
					}).catch(function(e) {
						return new Promise(function(_resolve, reject) {
							reject(e);
						});
					}));
				}
			}, _callee);
		}));
	}
}) });

//#endregion
//#region node_modules/react-auth-kit/dist/refresh/Refresh.js
var require_Refresh = /* @__PURE__ */ __commonJS({ "node_modules/react-auth-kit/dist/refresh/Refresh.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.Refresh = Refresh;
	var _react = require_react();
	var _useRefreshApiCall$1 = require_useRefreshApiCall();
	var _action = _interopRequireDefault$1(require_action());
	var _hooks = require_hooks();
	function _interopRequireDefault$1(e) {
		return e && e.__esModule ? e : { default: e };
	}
	function _slicedToArray(r, e) {
		return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();
	}
	function _nonIterableRest() {
		throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
	}
	function _unsupportedIterableToArray(r, a) {
		if (r) {
			if ("string" == typeof r) return _arrayLikeToArray(r, a);
			var t = {}.toString.call(r).slice(8, -1);
			return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;
		}
	}
	function _arrayLikeToArray(r, a) {
		(null == a || a > r.length) && (a = r.length);
		for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];
		return n;
	}
	function _iterableToArrayLimit(r, l) {
		var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"];
		if (null != t) {
			var e, n, i, u, a = [], f = !0, o = !1;
			try {
				if (i = (t = t.call(r)).next, 0 === l) {
					if (Object(t) !== t) return;
					f = !1;
				} else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);
			} catch (r$1) {
				o = !0, n = r$1;
			} finally {
				try {
					if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return;
				} finally {
					if (o) throw n;
				}
			}
			return a;
		}
	}
	function _arrayWithHoles(r) {
		if (Array.isArray(r)) return r;
	}
	function Refresh(_ref) {
		var _store$value$refresh;
		var children = _ref.children, refresh = _ref.refresh, store = _ref.store;
		var _useState = (0, _react.useState)(!!((_store$value$refresh = store.value.refresh) !== null && _store$value$refresh !== void 0 && _store$value$refresh.token)), _useState2 = _slicedToArray(_useState, 2), shouldInitialRefreshState = _useState2[0], setShouldInitialRefreshState = _useState2[1];
		var refreshApiCall = (0, _useRefreshApiCall$1.useRefreshApiCall)(refresh, store);
		var _refresh$1 = function _refresh$2() {
			refreshApiCall().then(function(data) {
				if (data !== null) _action.default.doRefresh(data, store);
				else _action.default.doSignOut(store);
				setShouldInitialRefreshState(false);
			}).catch(function(e) {
				console.error(e);
				_action.default.doSignOut(store);
			});
		};
		(0, _hooks.useIntervalRefresh)(_refresh$1, store, refresh.interval);
		(0, _react.useEffect)(function() {
			var value = store.value;
			if (value.isSignIn) setShouldInitialRefreshState(false);
			else if (value.isUsingRefreshToken && value.refresh && value.refresh.expiresAt > /* @__PURE__ */ new Date()) _refresh$1();
			else {
				_action.default.doSignOut(store);
				setShouldInitialRefreshState(false);
			}
		}, []);
		if (shouldInitialRefreshState && refresh.initialRefreshComponent) return refresh.initialRefreshComponent;
		else return children;
	}
}) });

//#endregion
//#region node_modules/react-auth-kit/dist/refresh/index.js
var require_refresh = /* @__PURE__ */ __commonJS({ "node_modules/react-auth-kit/dist/refresh/index.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	var _createRefresh = require_createRefresh();
	Object.keys(_createRefresh).forEach(function(key) {
		if (key === "default" || key === "__esModule") return;
		if (key in exports && exports[key] === _createRefresh[key]) return;
		Object.defineProperty(exports, key, {
			enumerable: true,
			get: function get() {
				return _createRefresh[key];
			}
		});
	});
	var _useRefreshApiCall = require_useRefreshApiCall();
	Object.keys(_useRefreshApiCall).forEach(function(key) {
		if (key === "default" || key === "__esModule") return;
		if (key in exports && exports[key] === _useRefreshApiCall[key]) return;
		Object.defineProperty(exports, key, {
			enumerable: true,
			get: function get() {
				return _useRefreshApiCall[key];
			}
		});
	});
	var _Refresh = require_Refresh();
	Object.keys(_Refresh).forEach(function(key) {
		if (key === "default" || key === "__esModule") return;
		if (key in exports && exports[key] === _Refresh[key]) return;
		Object.defineProperty(exports, key, {
			enumerable: true,
			get: function get() {
				return _Refresh[key];
			}
		});
	});
}) });

//#endregion
//#region node_modules/react-auth-kit/dist/AuthProvider.js
var require_AuthProvider = /* @__PURE__ */ __commonJS({ "node_modules/react-auth-kit/dist/AuthProvider.js": ((exports) => {
	function _typeof$1(o) {
		"@babel/helpers - typeof";
		return _typeof$1 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(o$1) {
			return typeof o$1;
		} : function(o$1) {
			return o$1 && "function" == typeof Symbol && o$1.constructor === Symbol && o$1 !== Symbol.prototype ? "symbol" : typeof o$1;
		}, _typeof$1(o);
	}
	Object.defineProperty(exports, "__esModule", { value: true });
	_interopRequireWildcard$1(require_react());
	var _refresh = require_refresh();
	var _AuthContext = _interopRequireDefault(require_AuthContext());
	var _jsxRuntime = require_jsx_runtime();
	function _interopRequireDefault(e) {
		return e && e.__esModule ? e : { default: e };
	}
	function _interopRequireWildcard$1(e, t) {
		if ("function" == typeof WeakMap) var r = /* @__PURE__ */ new WeakMap(), n = /* @__PURE__ */ new WeakMap();
		return (_interopRequireWildcard$1 = function _interopRequireWildcard$2(e$1, t$1) {
			if (!t$1 && e$1 && e$1.__esModule) return e$1;
			var o, i, f = {
				__proto__: null,
				default: e$1
			};
			if (null === e$1 || "object" != _typeof$1(e$1) && "function" != typeof e$1) return f;
			if (o = t$1 ? n : r) {
				if (o.has(e$1)) return o.get(e$1);
				o.set(e$1, f);
			}
			for (var _t in e$1) "default" !== _t && {}.hasOwnProperty.call(e$1, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e$1, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e$1[_t]);
			return f;
		})(e, t);
	}
	function AuthProvider(_ref) {
		var store = _ref.store, router = _ref.router, fallbackPath = _ref.fallbackPath, children = _ref.children;
		var tokenStore = store.tokenStore, refresh = store.refresh;
		return (0, _jsxRuntime.jsx)(_AuthContext.default.Provider, {
			value: {
				store: tokenStore,
				router,
				config: { fallbackPath }
			},
			children: refresh ? (0, _jsxRuntime.jsx)(_refresh.Refresh, {
				refresh,
				store: tokenStore,
				children
			}) : children
		});
	}
	exports.default = AuthProvider;
}) });

//#endregion
//#region node_modules/react-auth-kit/dist/index.js
var require_dist = /* @__PURE__ */ __commonJS({ "node_modules/react-auth-kit/dist/index.js": ((exports) => {
	function _typeof(o) {
		"@babel/helpers - typeof";
		return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(o$1) {
			return typeof o$1;
		} : function(o$1) {
			return o$1 && "function" == typeof Symbol && o$1.constructor === Symbol && o$1 !== Symbol.prototype ? "symbol" : typeof o$1;
		}, _typeof(o);
	}
	Object.defineProperty(exports, "__esModule", { value: true });
	var _exportNames = {};
	Object.defineProperty(exports, "default", {
		enumerable: true,
		get: function get() {
			return _AuthProvider.default;
		}
	});
	var _AuthProvider = _interopRequireWildcard(require_AuthProvider());
	Object.keys(_AuthProvider).forEach(function(key) {
		if (key === "default" || key === "__esModule") return;
		if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
		if (key in exports && exports[key] === _AuthProvider[key]) return;
		Object.defineProperty(exports, key, {
			enumerable: true,
			get: function get() {
				return _AuthProvider[key];
			}
		});
	});
	function _interopRequireWildcard(e, t) {
		if ("function" == typeof WeakMap) var r = /* @__PURE__ */ new WeakMap(), n = /* @__PURE__ */ new WeakMap();
		return (_interopRequireWildcard = function _interopRequireWildcard$2(e$1, t$1) {
			if (!t$1 && e$1 && e$1.__esModule) return e$1;
			var o, i, f = {
				__proto__: null,
				default: e$1
			};
			if (null === e$1 || "object" != _typeof(e$1) && "function" != typeof e$1) return f;
			if (o = t$1 ? n : r) {
				if (o.has(e$1)) return o.get(e$1);
				o.set(e$1, f);
			}
			for (var _t in e$1) "default" !== _t && {}.hasOwnProperty.call(e$1, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e$1, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e$1[_t]);
			return f;
		})(e, t);
	}
}) });

//#endregion
export default require_dist();

//# sourceMappingURL=react-auth-kit.js.map