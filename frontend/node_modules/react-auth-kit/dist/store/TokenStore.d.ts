import { ITokenStore } from "./ITokenStore";
import { UpdatedAuthKitState } from "./types";
import { AuthKitState } from "../types";
import { IStorage } from "../storage";
import { IToken } from "../token";
import { IStorageNamingStrategy } from "../storage";
declare class TokenStore<T> implements ITokenStore<T> {
    /**
     * Boolean value to check if the application
     * is using the refresh token feature or not
     */
    private readonly isUsingRefreshToken;
    /**
     * Storage - Storage interface to store the tokens
     *
     * This can be a cookie or localstorage
     * depending on the `authType` parameter
     */
    private readonly storage;
    /**
     * Storage Naming Strategy - Storage Naming Strategy interface to
     * get the storage names for the tokens
     *
     * This will be used to get the storage names for the auth token,
     * auth type, user state, and refresh token
     */
    private readonly storageNamingStrategy;
    /**
     * Token - Token interface to get the expiration time of the tokens
     *
     * This will be used to get the expiration time of the auth token and
     * refresh token
     */
    private readonly token;
    /**
     * Auth Value - The current state of the AuthKit
     *
     * This will be used to store the current state of the AuthKit,
     * which includes the auth token, refresh token, user state, and
     * whether the user is signed in or not
     */
    private authValue;
    /**
     * Auth Subject - The BehaviorSubject to hold the current state of the AuthKit
     *
     * This will be used to emit the current state of the AuthKit to the subscribers
     */
    private authSubject;
    /**
     * Debug - Whether to run in debug mode or not
     *
     * If `true`, then the debug messages will be logged to the console
     * If `false`, then no debug messages will be logged
     */
    private readonly debug;
    /**
     * Constructor for the TokenStore
     *
     * @param isUsingRefreshToken - Boolean value to check if the application
     * is using the refresh token feature or not
     * @param storage - Storage interface to store the tokens
     * @param storageNamingStrategy - Storage Naming Strategy interface to get the storage names for the tokens
     * @param token - Token interface to get the expiration time of the tokens
     * @param debug - Whether to run in debug mode or not
     */
    constructor(isUsingRefreshToken: boolean, storage: IStorage, storageNamingStrategy: IStorageNamingStrategy, token: IToken, debug: boolean);
    /**
     * Subscribe method for TokenObject
     *
     * @param next - A callback function that gets called by the producer during
     * the subscription when the producer "has" the `value`. It won't be called
     * if `error` or `complete` callback functions have been called
     * @param error - A callback function that gets called by the producer
     * if and when it encountered a problem of any kind
     * @param complete - A callback function that gets called by the producer
     * if and when it has no more values to provide
     */
    subscribe: (next: ((value: AuthKitState<T>) => void), error?: ((err: any) => void), complete?: (() => void)) => void;
    /**
     * @internal
     * @param data - The data to set the state
     *
     * @remarks
     * Below is the logic
     * ```txt
     * data
     *  |
     *  |---- new user state is present ----- Replace User state
     *  |
     *  |
     *  |---- new auth is present ----------- Replace Auth token
     *  |   |     and not null
     *  |   |
     *  |   |
     *  |   |
     *  |   ---- new auth is null ----------------------- Clean auth and
     *  |   |                                               user state
     *  |   |
     *  |   ---- no new auth data ----------------------- Do nothing use the
     *  |            present                            old auth and user state
     *  |
     *  -- is using refresh token is true - new refresh is ---- Update the
     *   |                               |   present is       refresh token
     *   |                               |    not null
     *   |                               |
     *   |                               |
     *   |                               - new refresh ------- Clean refresh token
     *   |                               |   is null
     *   |                               |
     *   |                               - no new refresh ---- Do nothing use
     *   |                                                     the old refresh
     *   |
     *   -- is using refresh token is false ------------------ Do nothing use
     *                                                         the old refresh
     * ```
     */
    set: (data: UpdatedAuthKitState<T>) => void;
    /**
     * Getter for the current state for TokenObject
     */
    get value(): AuthKitState<T>;
    /**
     * Get the Initial Tokens and states from storage
     * when the Application is bootstrapping or refreshed
     *
     * @remarks
     * If the `authStorageType` is `cookie`,
     * get information from the `initialCookieToken ()` function
     *
     * If the `authTokenType` is `localStorage`
     * get information from `initialLSToken()` function
     *
     * @returns Initial State
     */
    private initialToken_;
    /**
     * Check for all the existence for the Tokens
     * Called Internally by `initialCookieToken_()` and `initialLSToken_()`
     *
     * @param authToken - Auth token from cookie or localstorage
     * @param authTokenType - Auth token type from cookie or localstorage
     * @param stateCookie - User state from cookie of localstorage
     * @param refreshToken - Refresh token from cookie or localstorage
     *
     * @returns Auth State with all conditions and guard in place
     */
    private checkTokenExist_;
    /**
     * Sync Auth Tokens on time of login and logout
     *
     * Set the New Cookies or new Localstorage on login
     * Or Remove the old Cookies or old Localstorage on logout
     *
     * @param authState - Current Auth State
     */
    syncTokens: (authState: AuthKitState<T>) => void;
    private setAuthToken;
    private setRefreshToken;
    /**
     * Remove Tokens on time of Logout
     */
    private removeAllToken;
    /**
     * Remove Tokens on time of Logout
     */
    private removeAuth;
    /**
     * Remove Tokens on time of Logout
     */
    private removeRefresh;
    /**
     * Log function
     * @param msg - The Message to log to the console
     * @param optionalParams - Optional Parameter
     */
    private log;
}
export default TokenStore;
